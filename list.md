# 生產環境部署前管理後台整合測試

這份文件旨在確保 BlogCommerce 管理後台在部署到生產環境前，所有功能都經過全面且嚴謹的測試。測試涵蓋所有管理模組的讀取、新增、修改、刪除 (CRUD) 操作，並驗證前端、後端與資料庫之間的資料一致性。

## 測試準備

1.  **啟動服務**: 確保後端服務在 `8002` port 正常運行 (`uv run run.py`)。
2.  **管理員帳號**: 使用 `uv run install.py` 建立一個預設管理員帳號 (admin / admin123456)。
3.  **測試工具**: 使用瀏覽器登入管理後台，並準備好檢查 API 請求與資料庫內容。

---

## 功能測試清單

### [x] 儀表板 (Dashboard)
- [x] **資料讀取**: 驗證儀表板上的統計數據（如總訂單數、總銷售額、今日訪客等）是否能正確載入並顯示。
- [ ] **圖表渲染**: 檢查所有圖表是否能正確渲染，並且數據與後端一致.

### [x] 商品管理 (Products)
- [x] **讀取**: 驗證商品列表是否能正確顯示，包含分頁、搜尋功能。
- [x] **新增**: 建立一個新商品，包含所有必填欄位（名稱、價格、庫存、分類等），並上傳商品圖片。驗證資料庫中是否出現對應資料。
- [x] **修改**: 編輯剛才建立的商品，修改其價格和庫存。驗證前端和資料庫中的資料是否同步更新。
- [x] **刪除**: 刪除該商品。驗證商品是否已從列表和資料庫中移除。

### [x] 文章管理 (Posts)
- [x] **讀取**: 驗證文章列表是否能正確顯示，包含搜尋和篩選功能。
- [x] **新增**: 建立一篇新文章，使用 Markdown 編輯器，並設定發布狀態。驗證儲存後內容和狀態正確。
- [x] **修改**: 編輯該文章，更改其標題和內容，並切換發布狀態。驗證更新成功。
- [x] **刪除**: 刪除該文章。驗證文章是否已從列表和資料庫中移除。

### [x] 訂單管理 (Orders)
- [x] **讀取**: 驗證訂單列表是否能正確載入，並可透過訂單號、使用者名稱進行搜尋。
- [x] **詳情查看**: 點擊任一訂單，驗證訂單詳情（商品、金額、客戶資訊）是否正確顯示。
- [x] **狀態更新**: 修改訂單的「付款狀態」（如：從 `未付款` -> `已付款`）。
- [x] **狀態更新**: 修改訂單的「訂單狀態」（如：從 `待處理` -> `已出貨`）。驗證前後端狀態皆已更新。

### [ ] 使用者管理 (Users)
- [x] **讀取**: 驗證使用者列表是否能正確顯示，並可透過 email 或名稱搜尋。
- [x] **權限變更**: 將一個普通使用者的權限變更為管理員。驗證其 `is_admin` 狀態在資料庫中已更新。
- [ ] **狀態變更**: 停用一個使用者帳號。驗證其 `is_active` 狀態已更新，且該使用者無法再登入。

### [ ] 橫幅廣告管理 (Banners)
- [ ] **讀取**: 驗證橫幅列表是否正確顯示。
- [ ] **新增**: 新增一個橫幅廣告，上傳圖片並設定連結。驗證前台頁面是否出現此橫幅。
- [ ] **修改**: 修改該橫_廣告的排序或連結。驗證變更生效。
- [ ] **刪除**: 刪除該橫幅廣告。驗證其已從前後台移除。

### [ ] 優惠碼管理 (PromoCodes)
- [ ] **讀取**: 驗證優惠碼列表是否正確顯示。
- [ ] **新增**: 建立一個新的優惠碼（例如：九折券）。設定其折扣類型、數值和有效期限。
- [ ] **驗證**: 在前台結帳時使用該優惠碼，驗證折扣金額是否正確計算。
- [ ] **修改/停用**: 修改或停用該優惠碼。驗證其無法再被使用。

### [ ] 運費級距管理 (ShippingTiers)
- [ ] **讀取**: 驗證現有的運費規則是否正確顯示。
- [ ] **新增**: 新增一條運費規則（例如：滿千免運）。
- [ ] **驗證**: 在前台購物車中，透過調整商品數量，驗證運費是否根據新規則正確計算。
- [ ] **刪除**: 刪除該規則。驗證運費計算是否恢復原狀。

### [ ] 系統設定 (Settings)
- [ ] **網站資訊**: 修改網站標題和描述。驗證前台頁面標籤和 meta 資訊已更新。
- [ ] **付款設定**: 啟用/停用「銀行轉帳」付款方式，並填寫資訊。驗證前台結帳頁面的選項是否同步變化。
- [ ] **功能開關**: 啟用/停用「部落格」功能。驗證前台的部落格入口是否顯示/隱藏。

### [ ] 分析統計 (Analytics)
- [ ] **數據讀取**: 驗證分析頁面的數據（如瀏覽量、獨立訪客、熱門頁面）是否能正確載入。
- [ ] **日期篩選**: 使用日期區間篩選器，驗證圖表和數據是否根據所選範圍進行更新。


## 測試紀錄

- **2024-07-16**:
  - **進度**:
    - 修正後端商品刪除邏輯，改用明確的資料庫查詢，避免 500 錯誤。
    - 修正 Markdown 編輯器圖片上傳路徑問題，回傳完整的絕對 URL。
  - **發現問題**:
    - (暫無新問題)
  - **待辦事項**:
    - 繼續完成剩餘模組的測試。